\hypertarget{classcore_1_1broker_1_1_core_broker}{\section{core.\+broker.\+Core\+Broker Class Reference}
\label{classcore_1_1broker_1_1_core_broker}\index{core.\+broker.\+Core\+Broker@{core.\+broker.\+Core\+Broker}}
}


Inheritance diagram for core.\+broker.\+Core\+Broker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classcore_1_1broker_1_1_core_broker__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for core.\+broker.\+Core\+Broker\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{classcore_1_1broker_1_1_core_broker__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a935f310d4e45e54f59d0dfcb7805e632}{def {\bfseries \+\_\+\+\_\+init\+\_\+\+\_\+}}\label{classcore_1_1broker_1_1_core_broker_a935f310d4e45e54f59d0dfcb7805e632}

\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ae374c068e0d1e2a0fdd02e97542efd16}{startup}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a183821253455e288e4ed9be8ba4d5904}{shutdown}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ae1fc05cfb6afecd8550cfe06bd6e034b}{reset}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a89db0e240cc1f9870dfa54f6a8596abc}{startrecvloop}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a3c11034b5f2a9c94117d7dfcd7b363af}{recvloop}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ad900031736d366fcccb841aeb682f45b}{recv}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a9bc2b4e24f6a971637fa7015129ccd6e}{local\+\_\+instantiation\+\_\+complete}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a4beb718cd6597f4ecfed95bfc6691ea1}{instantiation\+\_\+complete}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ab49a42fe492f71945c77b51d90b9796c}{addserver}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_afb27f84a0be44ebf4d8a6c3d0ed50f62}{delserver}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_aa4511f4a854b5c75e70468312f42070b}{getserverbyname}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a8a3cc9cca90ece2ddeea874040837c0e}{getserverbysock}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_aa181fc886fa0b49f33e3183513d0a7a6}{getservers}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a4546c152527cb9a528339a99d73a7ea6}{getservernames}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ae87c24f64a0cb6422679ce135edd4c97}{tunnelkey}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a1b855f94bef2565eb8282de25ff11122}{addtunnel}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ac291295f26264962f4bdddcb9673c0d1}{addnettunnels}
\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_ae8d0bd37b367284037fa39e0afb85f27}{def {\bfseries addnettunnel}}\label{classcore_1_1broker_1_1_core_broker_ae8d0bd37b367284037fa39e0afb85f27}

\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a89b852636a86422e8af5e9b3005cc896}{deltunnel}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a71a8cb73d8e11c40b990d1b0b88daaf9}{gettunnel}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ad57eabcf9eea1e0b3bdbe35bac9901aa}{addnodemap}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_aeee6b763481c8c6e5190f8819186eb34}{delnodemap}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_aec3a34734f2617ec1fceedae93f42776}{getserversbynode}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ac315dd60a4baecbb130eb05542d18e08}{addnet}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a94c61d1f04e55949980131c04f53135d}{addphys}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a1fe86cfe817308b36f39c1be0bdb0866}{configure\+\_\+reset}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a41bb45e96f171d1bc4572fc2e488693b}{configure\+\_\+values}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a6801ecce1e0f61a53aad3305ef15a4f3}{handlemsg}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_acbadbdbf79ce9408c7bd38e2a805642d}{setupserver}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a8f67805cce8f00d0b094ce18a0234224}{handlenodemsg}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a8fb4f2214cbbca69b816afaaf52d8a1c}{handlelinkmsg}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a25f849874d957dbd23ad42ff21dd35f1}{addlinkendpoints}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a484a8e4f7c4bb007e19cf8961a9f344f}{getlinkendpoint}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a63d6e4cd3270ceb6ffc63cd2cb3ad978}{handlerawmsg}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a4672e8216887d50b3b01948e785fa1b3}{forwardmsg}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ae832820695b78e7231df26455c037c60}{writeservers}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_a8dbecc71f839abe5c002de6e00d27945}{writenodeserver}
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classcore_1_1broker_1_1_core_broker_ae20748006a43afe488d3451bdad9759b}{fixupremotetty}
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a01e3c7ba570e019db18b109931e3fd22}{{\bfseries session\+\_\+id\+\_\+master}}\label{classcore_1_1broker_1_1_core_broker_a01e3c7ba570e019db18b109931e3fd22}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a4b7abc2619a2f1f6d43f0802e80760c0}{{\bfseries myip}}\label{classcore_1_1broker_1_1_core_broker_a4b7abc2619a2f1f6d43f0802e80760c0}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a93794410b832e001ddf7493655032818}{{\bfseries verbose}}\label{classcore_1_1broker_1_1_core_broker_a93794410b832e001ddf7493655032818}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a8b96c9a427ea1a46a3ddbf58a590a73b}{{\bfseries servers}}\label{classcore_1_1broker_1_1_core_broker_a8b96c9a427ea1a46a3ddbf58a590a73b}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a465cbcfa48286ec6a19b1ec54d42941f}{{\bfseries servers\+\_\+lock}}\label{classcore_1_1broker_1_1_core_broker_a465cbcfa48286ec6a19b1ec54d42941f}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a727b7274501da7807c995c3a9c93549d}{{\bfseries nodemap}}\label{classcore_1_1broker_1_1_core_broker_a727b7274501da7807c995c3a9c93549d}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a52566fd1fbcb3efa79cc29774bcc7781}{{\bfseries nodemap\+\_\+lock}}\label{classcore_1_1broker_1_1_core_broker_a52566fd1fbcb3efa79cc29774bcc7781}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a54006ad1eb2aac7a9671e4f7cc6bc7fc}{{\bfseries nodecounts}}\label{classcore_1_1broker_1_1_core_broker_a54006ad1eb2aac7a9671e4f7cc6bc7fc}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_aa48b944c323520f1dd9ed4e2558a34c4}{{\bfseries nets}}\label{classcore_1_1broker_1_1_core_broker_aa48b944c323520f1dd9ed4e2558a34c4}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a927ce4debaf14fadf55ab10daed9645d}{{\bfseries phys}}\label{classcore_1_1broker_1_1_core_broker_a927ce4debaf14fadf55ab10daed9645d}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_add811170458c1c3b9cf3d6b0ba0fec34}{{\bfseries handlers}}\label{classcore_1_1broker_1_1_core_broker_add811170458c1c3b9cf3d6b0ba0fec34}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_acd5f314fd5c4e79dd613207235922b3b}{{\bfseries tunnels}}\label{classcore_1_1broker_1_1_core_broker_acd5f314fd5c4e79dd613207235922b3b}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_ae8023f84783cb5f3630249127fae5613}{{\bfseries dorecvloop}}\label{classcore_1_1broker_1_1_core_broker_ae8023f84783cb5f3630249127fae5613}

\item 
\hypertarget{classcore_1_1broker_1_1_core_broker_a6534a4c280fa3222c19281109b05f0c6}{{\bfseries recvthread}}\label{classcore_1_1broker_1_1_core_broker_a6534a4c280fa3222c19281109b05f0c6}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Member of pycore session class for handling global emulation server
    data.
\end{DoxyVerb}
 

\subsection{Member Function Documentation}
\hypertarget{classcore_1_1broker_1_1_core_broker_a25f849874d957dbd23ad42ff21dd35f1}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!addlinkendpoints@{addlinkendpoints}}
\index{addlinkendpoints@{addlinkendpoints}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{addlinkendpoints}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+addlinkendpoints (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg, }
\item[{}]{servers1, }
\item[{}]{servers2}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a25f849874d957dbd23ad42ff21dd35f1}
\begin{DoxyVerb}For a link message that is not handled locally, inform the remote
    servers of the IP addresses used as tunnel endpoints by adding
    opaque data to the link message.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ac315dd60a4baecbb130eb05542d18e08}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!addnet@{addnet}}
\index{addnet@{addnet}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{addnet}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+addnet (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nodenum}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ac315dd60a4baecbb130eb05542d18e08}
\begin{DoxyVerb}Add a node number to the list of link-layer nodes.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ac291295f26264962f4bdddcb9673c0d1}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!addnettunnels@{addnettunnels}}
\index{addnettunnels@{addnettunnels}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{addnettunnels}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+addnettunnels (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ac291295f26264962f4bdddcb9673c0d1}
\begin{DoxyVerb}Add GreTaps between network devices on different machines.
The GreTapBridge is not used since that would add an extra bridge.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ad57eabcf9eea1e0b3bdbe35bac9901aa}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!addnodemap@{addnodemap}}
\index{addnodemap@{addnodemap}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{addnodemap}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+addnodemap (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{server, }
\item[{}]{nodenum}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ad57eabcf9eea1e0b3bdbe35bac9901aa}
\begin{DoxyVerb}Record a node number to emulation server mapping.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a94c61d1f04e55949980131c04f53135d}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!addphys@{addphys}}
\index{addphys@{addphys}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{addphys}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+addphys (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nodenum}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a94c61d1f04e55949980131c04f53135d}
\begin{DoxyVerb}Add a node number to the list of physical nodes.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ab49a42fe492f71945c77b51d90b9796c}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!addserver@{addserver}}
\index{addserver@{addserver}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{addserver}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+addserver (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name, }
\item[{}]{host, }
\item[{}]{port}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ab49a42fe492f71945c77b51d90b9796c}
\begin{DoxyVerb}Add a new server, and try to connect to it. If we're already
    connected to this (host, port), then leave it alone. When host,port
    is None, do not try to connect.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a1b855f94bef2565eb8282de25ff11122}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!addtunnel@{addtunnel}}
\index{addtunnel@{addtunnel}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{addtunnel}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+addtunnel (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{remoteip, }
\item[{}]{n1num, }
\item[{}]{n2num, }
\item[{}]{localnum}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a1b855f94bef2565eb8282de25ff11122}
\begin{DoxyVerb}Add a new GreTapBridge between nodes on two different machines.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a1fe86cfe817308b36f39c1be0bdb0866}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!configure\+\_\+reset@{configure\+\_\+reset}}
\index{configure\+\_\+reset@{configure\+\_\+reset}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{configure\+\_\+reset}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+configure\+\_\+reset (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a1fe86cfe817308b36f39c1be0bdb0866}
\begin{DoxyVerb}Ignore reset messages, because node delete responses may still 
    arrive and require the use of nodecounts.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a41bb45e96f171d1bc4572fc2e488693b}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!configure\+\_\+values@{configure\+\_\+values}}
\index{configure\+\_\+values@{configure\+\_\+values}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{configure\+\_\+values}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+configure\+\_\+values (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg, }
\item[{}]{values}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a41bb45e96f171d1bc4572fc2e488693b}
\begin{DoxyVerb}Receive configuration message with a list of server:host:port
    combinations that we'll need to connect with.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_aeee6b763481c8c6e5190f8819186eb34}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!delnodemap@{delnodemap}}
\index{delnodemap@{delnodemap}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{delnodemap}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+delnodemap (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{server, }
\item[{}]{nodenum}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_aeee6b763481c8c6e5190f8819186eb34}
\begin{DoxyVerb}Remove a node number to emulation server mapping.
    Return the number of nodes left on this server.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_afb27f84a0be44ebf4d8a6c3d0ed50f62}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!delserver@{delserver}}
\index{delserver@{delserver}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{delserver}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+delserver (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{server}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_afb27f84a0be44ebf4d8a6c3d0ed50f62}
\begin{DoxyVerb}Remove a server and hang up any connection.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a89b852636a86422e8af5e9b3005cc896}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!deltunnel@{deltunnel}}
\index{deltunnel@{deltunnel}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{deltunnel}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+deltunnel (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{n1num, }
\item[{}]{n2num}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a89b852636a86422e8af5e9b3005cc896}
\begin{DoxyVerb}Cleanup of the GreTapBridge.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ae20748006a43afe488d3451bdad9759b}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!fixupremotetty@{fixupremotetty}}
\index{fixupremotetty@{fixupremotetty}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{fixupremotetty}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+fixupremotetty (
\begin{DoxyParamCaption}
\item[{}]{msghdr, }
\item[{}]{msgdata, }
\item[{}]{host}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{classcore_1_1broker_1_1_core_broker_ae20748006a43afe488d3451bdad9759b}
\begin{DoxyVerb}When an interactive TTY request comes from the GUI, snoop the reply
    and add an SSH command to the appropriate remote server.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a4672e8216887d50b3b01948e785fa1b3}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!forwardmsg@{forwardmsg}}
\index{forwardmsg@{forwardmsg}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{forwardmsg}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+forwardmsg (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg, }
\item[{}]{servers}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a4672e8216887d50b3b01948e785fa1b3}
\begin{DoxyVerb}Forward API message to all given servers.

    Return True if an empty host/port is encountered, indicating
    the message should be handled locally.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a484a8e4f7c4bb007e19cf8961a9f344f}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!getlinkendpoint@{getlinkendpoint}}
\index{getlinkendpoint@{getlinkendpoint}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{getlinkendpoint}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+getlinkendpoint (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg, }
\item[{}]{first\+\_\+is\+\_\+local}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a484a8e4f7c4bb007e19cf8961a9f344f}
\begin{DoxyVerb}A link message between two different servers has been received,
    and we need to determine the tunnel endpoint. First look for
    opaque data in the link message, otherwise use the IP of the message
    sender (the master server).
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_aa4511f4a854b5c75e70468312f42070b}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!getserverbyname@{getserverbyname}}
\index{getserverbyname@{getserverbyname}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{getserverbyname}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+getserverbyname (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_aa4511f4a854b5c75e70468312f42070b}
\begin{DoxyVerb}Return the server object having the given name, or None.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a8a3cc9cca90ece2ddeea874040837c0e}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!getserverbysock@{getserverbysock}}
\index{getserverbysock@{getserverbysock}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{getserverbysock}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+getserverbysock (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{sock}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a8a3cc9cca90ece2ddeea874040837c0e}
\begin{DoxyVerb}Return the server object corresponding to the given socket,
    or None.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a4546c152527cb9a528339a99d73a7ea6}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!getservernames@{getservernames}}
\index{getservernames@{getservernames}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{getservernames}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+getservernames (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a4546c152527cb9a528339a99d73a7ea6}
\begin{DoxyVerb}Return a sorted list of server names (keys from self.servers).
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_aa181fc886fa0b49f33e3183513d0a7a6}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!getservers@{getservers}}
\index{getservers@{getservers}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{getservers}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+getservers (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_aa181fc886fa0b49f33e3183513d0a7a6}
\begin{DoxyVerb}Return a list of servers sorted by name.\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_aec3a34734f2617ec1fceedae93f42776}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!getserversbynode@{getserversbynode}}
\index{getserversbynode@{getserversbynode}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{getserversbynode}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+getserversbynode (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nodenum}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_aec3a34734f2617ec1fceedae93f42776}
\begin{DoxyVerb}Retrieve a set of emulation servers given a node number.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a71a8cb73d8e11c40b990d1b0b88daaf9}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!gettunnel@{gettunnel}}
\index{gettunnel@{gettunnel}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{gettunnel}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+gettunnel (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{n1num, }
\item[{}]{n2num}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a71a8cb73d8e11c40b990d1b0b88daaf9}
\begin{DoxyVerb}Return the GreTap between two nodes if it exists.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a8fb4f2214cbbca69b816afaaf52d8a1c}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!handlelinkmsg@{handlelinkmsg}}
\index{handlelinkmsg@{handlelinkmsg}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{handlelinkmsg}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+handlelinkmsg (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a8fb4f2214cbbca69b816afaaf52d8a1c}
\begin{DoxyVerb}Determine and return the servers to which this link message should
    be forwarded. Also build tunnels between different servers or add
    opaque data to the link message before forwarding.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a6801ecce1e0f61a53aad3305ef15a4f3}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!handlemsg@{handlemsg}}
\index{handlemsg@{handlemsg}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{handlemsg}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+handlemsg (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a6801ecce1e0f61a53aad3305ef15a4f3}
\begin{DoxyVerb}Handle an API message. Determine whether this needs to be handled
    by the local server or forwarded on to another one.
    Returns True when message does not need to be handled locally,
    and performs forwarding if required.
    Returning False indicates this message should be handled locally.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a8f67805cce8f00d0b094ce18a0234224}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!handlenodemsg@{handlenodemsg}}
\index{handlenodemsg@{handlenodemsg}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{handlenodemsg}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+handlenodemsg (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a8f67805cce8f00d0b094ce18a0234224}
\begin{DoxyVerb}Determine and return the servers to which this node message should
    be forwarded. Also keep track of link-layer nodes and the mapping of
    nodes to servers.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a63d6e4cd3270ceb6ffc63cd2cb3ad978}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!handlerawmsg@{handlerawmsg}}
\index{handlerawmsg@{handlerawmsg}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{handlerawmsg}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+handlerawmsg (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{msg}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a63d6e4cd3270ceb6ffc63cd2cb3ad978}
\begin{DoxyVerb}Helper to invoke handlemsg() using raw (packed) message bytes.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a4beb718cd6597f4ecfed95bfc6691ea1}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!instantiation\+\_\+complete@{instantiation\+\_\+complete}}
\index{instantiation\+\_\+complete@{instantiation\+\_\+complete}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{instantiation\+\_\+complete}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+instantiation\+\_\+complete (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a4beb718cd6597f4ecfed95bfc6691ea1}
\begin{DoxyVerb}\
Return True if all servers have completed instantiation, False
otherwise.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a9bc2b4e24f6a971637fa7015129ccd6e}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!local\+\_\+instantiation\+\_\+complete@{local\+\_\+instantiation\+\_\+complete}}
\index{local\+\_\+instantiation\+\_\+complete@{local\+\_\+instantiation\+\_\+complete}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{local\+\_\+instantiation\+\_\+complete}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+local\+\_\+instantiation\+\_\+complete (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a9bc2b4e24f6a971637fa7015129ccd6e}
\begin{DoxyVerb}\
Set the local server's instantiation-complete status to True.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ad900031736d366fcccb841aeb682f45b}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!recv@{recv}}
\index{recv@{recv}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{recv}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+recv (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{server}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ad900031736d366fcccb841aeb682f45b}
\begin{DoxyVerb}Receive data on an emulation server socket and broadcast it to
    all connected session handlers. Returns the length of data recevied
    and forwarded. Return value of zero indicates the socket has closed
    and should be removed from the self.servers dict.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a3c11034b5f2a9c94117d7dfcd7b363af}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!recvloop@{recvloop}}
\index{recvloop@{recvloop}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{recvloop}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+recvloop (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a3c11034b5f2a9c94117d7dfcd7b363af}
\begin{DoxyVerb}Thread target that receives messages from server sockets.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ae1fc05cfb6afecd8550cfe06bd6e034b}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!reset@{reset}}
\index{reset@{reset}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{reset}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+reset (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ae1fc05cfb6afecd8550cfe06bd6e034b}
\begin{DoxyVerb}Reset to initial state.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_acbadbdbf79ce9408c7bd38e2a805642d}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!setupserver@{setupserver}}
\index{setupserver@{setupserver}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{setupserver}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+setupserver (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{servername}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_acbadbdbf79ce9408c7bd38e2a805642d}
\begin{DoxyVerb}Send the appropriate API messages for configuring the specified
    emulation server.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a183821253455e288e4ed9be8ba4d5904}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!shutdown@{shutdown}}
\index{shutdown@{shutdown}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{shutdown}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+shutdown (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a183821253455e288e4ed9be8ba4d5904}
\begin{DoxyVerb}Close all active sockets; called when the session enters the
    data collect state
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a89db0e240cc1f9870dfa54f6a8596abc}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!startrecvloop@{startrecvloop}}
\index{startrecvloop@{startrecvloop}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{startrecvloop}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+startrecvloop (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a89db0e240cc1f9870dfa54f6a8596abc}
\begin{DoxyVerb}Spawn the recvloop() thread if it hasn't been already started.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ae374c068e0d1e2a0fdd02e97542efd16}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!startup@{startup}}
\index{startup@{startup}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{startup}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+startup (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ae374c068e0d1e2a0fdd02e97542efd16}
\begin{DoxyVerb}Build tunnels between network-layer nodes now that all node
    and link information has been received; called when session
    enters the instantation state.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ae87c24f64a0cb6422679ce135edd4c97}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!tunnelkey@{tunnelkey}}
\index{tunnelkey@{tunnelkey}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{tunnelkey}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+tunnelkey (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{n1num, }
\item[{}]{n2num}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ae87c24f64a0cb6422679ce135edd4c97}
\begin{DoxyVerb}Compute a 32-bit key used to uniquely identify a GRE tunnel.
The hash(n1num), hash(n2num) values are used, so node numbers may be
None or string values (used for e.g. "ctrlnet").
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_a8dbecc71f839abe5c002de6e00d27945}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!writenodeserver@{writenodeserver}}
\index{writenodeserver@{writenodeserver}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{writenodeserver}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+writenodeserver (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nodestr, }
\item[{}]{server}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_a8dbecc71f839abe5c002de6e00d27945}
\begin{DoxyVerb}Creates a /tmp/pycore.nnnnn/nX.conf/server file having the node
and server info. This may be used by scripts for accessing nodes on
other machines, much like local nodes may be accessed via the
VnodeClient class.
\end{DoxyVerb}
 \hypertarget{classcore_1_1broker_1_1_core_broker_ae832820695b78e7231df26455c037c60}{\index{core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}!writeservers@{writeservers}}
\index{writeservers@{writeservers}!core\+::broker\+::\+Core\+Broker@{core\+::broker\+::\+Core\+Broker}}
\subsubsection[{writeservers}]{\setlength{\rightskip}{0pt plus 5cm}def core.\+broker.\+Core\+Broker.\+writeservers (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}}\label{classcore_1_1broker_1_1_core_broker_ae832820695b78e7231df26455c037c60}
\begin{DoxyVerb}Write the server list to a text file in the session directory upon
startup: /tmp/pycore.nnnnn/servers
\end{DoxyVerb}
 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
daemon/core/broker.\+py\end{DoxyCompactItemize}
